<html>
<head>
<script src="pythonjs.js"></script>
<script src="require.js"></script>

<script type="text/python">
## sudo npm install requirejs -g
## sudo npm install three -g

#import three as THREE  ## TODO fix me
require(['three'])

def test():
	global ren, scn, cam, mesh

	div = document.createElement( 'div' )
	document.body.appendChild(div)

	width = 640; height = 320
	scn = new( THREE.Scene() )
	cam = new( THREE.PerspectiveCamera( 45, width/height, 0.01, 10000) )
	cam.position.z = 100
	cam.position.x = 5

	ren = new( THREE.CanvasRenderer() )
	ren.setSize( width, height )
	ren.setClearColor( red=0.1, green=0.8, blue=0.5 )

	div.appendChild( ren.domElement )

	geo = new( THREE.CubeGeometry( 10, 10, 10 ) )
	print 'geo->', geo
	mat = new( THREE.MeshBasicMaterial( wireframe=True ) )
	print 'mat->', mat
	mesh = new( THREE.Mesh( geo, mat ) )
	scn.add( mesh )

	animate()

def animate():
	requestAnimationFrame( animate )
	mesh.rotation.x += 0.01
	mesh.rotation.y += 0.02
	x = mesh.quaternion.x
	y = mesh.quaternion.y
	z = mesh.quaternion.z
	mesh.material.color.setRGB( x,y,z )
	ren.render( scn, cam )

</script>

</head>
<body>
<button onclick="test()">click me</button>
</body>
</html>
